import os
from PIL import Image

# Path to the images folder
images_folder = '/home/shannon/local/Source/Python/bm_study/images/originals'

# Path to the JPG subfolder
jpg_folder = '/home/shannon/local/Source/Python/bm_study/images/originals/jpgs'

# Create the JPG subfolder if it doesn't exist
os.makedirs(jpg_folder, exist_ok=True)

# Loop through all files in the images folder
for filename in os.listdir(images_folder):
    if filename.endswith('.tiff') or filename.endswith('.tif'):
        # Open the TIFF image
        tiff_path = os.path.join(images_folder, filename)
        tiff_image = Image.open(tiff_path)

        # Convert RGBA to RGB if necessary
        if tiff_image.mode == 'RGBA':
            tiff_image = tiff_image.convert('RGB')

        # Convert and save as JPEG
        jpg_filename = os.path.splitext(filename)[0] + '.jpg'
        jpg_path = os.path.join(jpg_folder, jpg_filename)
        tiff_image.save(jpg_path, 'JPEG')

        # Close the TIFF image
        tiff_image.close()